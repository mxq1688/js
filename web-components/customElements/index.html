<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>定义</title>
</head>
<body>

  <test-shadow-root></test-shadow-root>

  <template id="temEle">
    <style>
      .main{
        color: #f00;
      }
    </style>
    <div class="main">
      我是template片段
      <!-- 定义插槽 -->
      <slot name="header"></slot>
    </div>
  </template>
  <test-template-ele>
    <style>
      .slot{
        color: rgb(87, 28, 223);
      }
    </style>
    <!-- 使用插槽 -->
    <div class="slot" slot="header">我是slot</div>
  </test-template-ele>

  <script>
      
    /* 自定义web-components */
    customElements.define('test-shadow-root', class extends HTMLElement {
      /* 当test-shadow-root组件被挂载到DOM上时，执行构造函数 */
      constructor() {
        super()
        const shadowRoot = this.attachShadow({mode: 'open'}) //给指定的元素挂载影子DOM
        // 当执行 this.attachShadow()方法时，shadowRoot被挂载构造函数中，可以通过this访问
        // mode open shadow root元素可以从js外部访问根节点
        // mode closed  拒绝从js外部访问关闭的shadow root节点
        // console.log('执行', this)
        const div = document.createElement('div')
        div.textContent = '我是div的内容'
        // shadowRoot.appendChild()
        // console.log('this', this.shadowRoot)
        shadowRoot.appendChild(div)
        // this.shadowRoot === shadowRoot  true
      }
    })

    /* 通过template自定义HTMLTemplateElement */
    customElements.define('test-template-ele', class extends HTMLElement {
      constructor() {
        super()
        const temEle = document.querySelector('#temEle')
        const templateContent = temEle.content //获取html片段
        // console.log('AA', templateContent instanceof DocumentFragment) //true
        // templateContent
        // 创建影子DOM，用于挂载template的片段
        const shadowRoot = this.attachShadow({mode: 'open'})
        // console.log('shadowRoot', shadowRoot)
        shadowRoot.appendChild(templateContent)
      }
    })

  </script>
</body>
</html>